(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Fe,C,wt,se,tt,Nt,kt,Ct,We,De,Me,xt,be={},St=[],zt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ne=Array.isArray;function ee(e,t){for(var n in t)e[n]=t[n];return e}function Ue(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Le(e,t,n){var r,a,i,l={};for(i in t)i=="key"?r=t[i]:i=="ref"?a=t[i]:l[i]=t[i];if(arguments.length>2&&(l.children=arguments.length>3?Fe.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)l[i]===void 0&&(l[i]=e.defaultProps[i]);return Pe(e,l,r,a,null)}function Pe(e,t,n,r,a){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++wt,__i:-1,__u:0};return a==null&&C.vnode!=null&&C.vnode(i),i}function le(e){return e.children}function te(e,t){this.props=e,this.context=t}function de(e,t){if(t==null)return e.__?de(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?de(e):null}function Pt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Pt(e)}}function Ae(e){(!e.__d&&(e.__d=!0)&&se.push(e)&&!Re.__r++||tt!=C.debounceRendering)&&((tt=C.debounceRendering)||Nt)(Re)}function Re(){for(var e,t,n,r,a,i,l,h=1;se.length;)se.length>h&&se.sort(kt),e=se.shift(),h=se.length,e.__d&&(n=void 0,a=(r=(t=e).__v).__e,i=[],l=[],t.__P&&((n=ee({},r)).__v=r.__v+1,C.vnode&&C.vnode(n),je(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[a]:null,i,a??de(r),!!(32&r.__u),l),n.__v=r.__v,n.__.__k[n.__i]=n,Et(i,n,l),n.__e!=a&&Pt(n)));Re.__r=0}function It(e,t,n,r,a,i,l,h,u,c,_){var s,m,g,N,b,P,v=r&&r.__k||St,p=t.length;for(u=Gt(n,t,v,u,p),s=0;s<p;s++)(g=n.__k[s])!=null&&(m=g.__i==-1?be:v[g.__i]||be,g.__i=s,P=je(e,g,m,a,i,l,h,u,c,_),N=g.__e,g.ref&&m.ref!=g.ref&&(m.ref&&ze(m.ref,null,g),_.push(g.ref,g.__c||N,g)),b==null&&N!=null&&(b=N),4&g.__u||m.__k===g.__k?u=Rt(g,u,e):typeof g.type=="function"&&P!==void 0?u=P:N&&(u=N.nextSibling),g.__u&=-7);return n.__e=b,u}function Gt(e,t,n,r,a){var i,l,h,u,c,_=n.length,s=_,m=0;for(e.__k=new Array(a),i=0;i<a;i++)(l=t[i])!=null&&typeof l!="boolean"&&typeof l!="function"?(u=i+m,(l=e.__k[i]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?Pe(null,l,null,null,null):Ne(l)?Pe(le,{children:l},null,null,null):l.constructor==null&&l.__b>0?Pe(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=e,l.__b=e.__b+1,h=null,(c=l.__i=Zt(l,n,u,s))!=-1&&(s--,(h=n[c])&&(h.__u|=2)),h==null||h.__v==null?(c==-1&&(a>_?m--:a<_&&m++),typeof l.type!="function"&&(l.__u|=4)):c!=u&&(c==u-1?m--:c==u+1?m++:(c>u?m--:m++,l.__u|=4))):e.__k[i]=null;if(s)for(i=0;i<_;i++)(h=n[i])!=null&&!(2&h.__u)&&(h.__e==r&&(r=de(h)),$t(h,h));return r}function Rt(e,t,n){var r,a;if(typeof e.type=="function"){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=Rt(r[a],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=de(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Ee(e,t){return t=t||[],e==null||typeof e=="boolean"||(Ne(e)?e.some(function(n){Ee(n,t)}):t.push(e)),t}function Zt(e,t,n,r){var a,i,l,h=e.key,u=e.type,c=t[n],_=c!=null&&(2&c.__u)==0;if(c===null&&e.key==null||_&&h==c.key&&u==c.type)return n;if(r>(_?1:0)){for(a=n-1,i=n+1;a>=0||i<t.length;)if((c=t[l=a>=0?a--:i++])!=null&&!(2&c.__u)&&h==c.key&&u==c.type)return l}return-1}function nt(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||zt.test(t)?n:n+"px"}function xe(e,t,n,r,a){var i,l;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||nt(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||nt(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(Ct,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=We,e.addEventListener(t,i?Me:De,i)):e.removeEventListener(t,i?Me:De,i);else{if(a=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function rt(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=We++;else if(t.t<n.u)return;return n(C.event?C.event(t):t)}}}function je(e,t,n,r,a,i,l,h,u,c){var _,s,m,g,N,b,P,v,p,L,T,B,Y,j,q,W,z,A=t.type;if(t.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),i=[h=t.__e=n.__e]),(_=C.__b)&&_(t);e:if(typeof A=="function")try{if(v=t.props,p="prototype"in A&&A.prototype.render,L=(_=A.contextType)&&r[_.__c],T=_?L?L.props.value:_.__:r,n.__c?P=(s=t.__c=n.__c).__=s.__E:(p?t.__c=s=new A(v,T):(t.__c=s=new te(v,T),s.constructor=A,s.render=qt),L&&L.sub(s),s.props=v,s.state||(s.state={}),s.context=T,s.__n=r,m=s.__d=!0,s.__h=[],s._sb=[]),p&&s.__s==null&&(s.__s=s.state),p&&A.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=ee({},s.__s)),ee(s.__s,A.getDerivedStateFromProps(v,s.__s))),g=s.props,N=s.state,s.__v=t,m)p&&A.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),p&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(p&&A.getDerivedStateFromProps==null&&v!==g&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(v,T),!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(v,s.__s,T)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(s.props=v,s.state=s.__s,s.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(Z){Z&&(Z.__=t)}),B=0;B<s._sb.length;B++)s.__h.push(s._sb[B]);s._sb=[],s.__h.length&&l.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(v,s.__s,T),p&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(g,N,b)})}if(s.context=T,s.props=v,s.__P=e,s.__e=!1,Y=C.__r,j=0,p){for(s.state=s.__s,s.__d=!1,Y&&Y(t),_=s.render(s.props,s.state,s.context),q=0;q<s._sb.length;q++)s.__h.push(s._sb[q]);s._sb=[]}else do s.__d=!1,Y&&Y(t),_=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++j<25);s.state=s.__s,s.getChildContext!=null&&(r=ee(ee({},r),s.getChildContext())),p&&!m&&s.getSnapshotBeforeUpdate!=null&&(b=s.getSnapshotBeforeUpdate(g,N)),W=_,_!=null&&_.type===le&&_.key==null&&(W=Ft(_.props.children)),h=It(e,Ne(W)?W:[W],t,n,r,a,i,l,h,u,c),s.base=t.__e,t.__u&=-161,s.__h.length&&l.push(s),P&&(s.__E=s.__=null)}catch(Z){if(t.__v=null,u||i!=null)if(Z.then){for(t.__u|=u?160:128;h&&h.nodeType==8&&h.nextSibling;)h=h.nextSibling;i[i.indexOf(h)]=null,t.__e=h}else{for(z=i.length;z--;)Ue(i[z]);Oe(t)}else t.__e=n.__e,t.__k=n.__k,Z.then||Oe(t);C.__e(Z,t,n)}else i==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):h=t.__e=Vt(n.__e,t,n,r,a,i,l,u,c);return(_=C.diffed)&&_(t),128&t.__u?void 0:h}function Oe(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Oe)}function Et(e,t,n){for(var r=0;r<n.length;r++)ze(n[r],n[++r],n[++r]);C.__c&&C.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){C.__e(i,a.__v)}})}function Ft(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Ne(e)?e.map(Ft):ee({},e)}function Vt(e,t,n,r,a,i,l,h,u){var c,_,s,m,g,N,b,P=n.props,v=t.props,p=t.type;if(p=="svg"?a="http://www.w3.org/2000/svg":p=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),i!=null){for(c=0;c<i.length;c++)if((g=i[c])&&"setAttribute"in g==!!p&&(p?g.localName==p:g.nodeType==3)){e=g,i[c]=null;break}}if(e==null){if(p==null)return document.createTextNode(v);e=document.createElementNS(a,p,v.is&&v),h&&(C.__m&&C.__m(t,i),h=!1),i=null}if(p==null)P===v||h&&e.data==v||(e.data=v);else{if(i=i&&Fe.call(e.childNodes),P=n.props||be,!h&&i!=null)for(P={},c=0;c<e.attributes.length;c++)P[(g=e.attributes[c]).name]=g.value;for(c in P)if(g=P[c],c!="children"){if(c=="dangerouslySetInnerHTML")s=g;else if(!(c in v)){if(c=="value"&&"defaultValue"in v||c=="checked"&&"defaultChecked"in v)continue;xe(e,c,null,g,a)}}for(c in v)g=v[c],c=="children"?m=g:c=="dangerouslySetInnerHTML"?_=g:c=="value"?N=g:c=="checked"?b=g:h&&typeof g!="function"||P[c]===g||xe(e,c,g,P[c],a);if(_)h||s&&(_.__html==s.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),t.__k=[];else if(s&&(e.innerHTML=""),It(t.type=="template"?e.content:e,Ne(m)?m:[m],t,n,r,p=="foreignObject"?"http://www.w3.org/1999/xhtml":a,i,l,i?i[0]:n.__k&&de(n,0),h,u),i!=null)for(c=i.length;c--;)Ue(i[c]);h||(c="value",p=="progress"&&N==null?e.removeAttribute("value"):N!=null&&(N!==e[c]||p=="progress"&&!N||p=="option"&&N!=P[c])&&xe(e,c,N,P[c],a),c="checked",b!=null&&b!=e[c]&&xe(e,c,b,P[c],a))}return e}function ze(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(a){C.__e(a,n)}}function $t(e,t,n){var r,a;if(C.unmount&&C.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||ze(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){C.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&$t(r[a],t,n||typeof e.type!="function");n||Ue(e.__e),e.__c=e.__=e.__e=void 0}function qt(e,t,n){return this.constructor(e,n)}function Xt(e,t,n){var r,a,i,l;t==document&&(t=document.documentElement),C.__&&C.__(e,t),a=(r=!1)?null:t.__k,i=[],l=[],je(t,e=t.__k=Le(le,null,[e]),a||be,be,t.namespaceURI,a?null:t.firstChild?Fe.call(t.childNodes):null,i,a?a.__e:t.firstChild,r,l),Et(i,e,l)}function Yt(e){function t(n){var r,a;return this.getChildContext||(r=new Set,(a={})[t.__c]=this,this.getChildContext=function(){return a},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(i){this.props.value!=i.value&&r.forEach(function(l){l.__e=!0,Ae(l)})},this.sub=function(i){r.add(i);var l=i.componentWillUnmount;i.componentWillUnmount=function(){r&&r.delete(i),l&&l.call(i)}}),n.children}return t.__c="__cC"+xt++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,r){return n.children(r)}).contextType=t,t}Fe=St.slice,C={__e:function(e,t,n,r){for(var a,i,l;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),l=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,r||{}),l=a.__d),l)return a.__E=a}catch(h){e=h}throw e}},wt=0,te.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ee({},this.state),typeof e=="function"&&(e=e(ee({},n),this.props)),e&&ee(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ae(this))},te.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ae(this))},te.prototype.render=le,se=[],Nt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,kt=function(e,t){return e.__v.__b-t.__v.__b},Re.__r=0,Ct=/(PointerCapture)$|Capture$/i,We=0,De=rt(!1),Me=rt(!0),xt=0;var Kt=0;function o(e,t,n,r,a,i){t||(t={});var l,h,u=t;if("ref"in u)for(h in u={},t)h=="ref"?l=t[h]:u[h]=t[h];var c={type:e,props:u,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Kt,__i:-1,__u:0,__source:a,__self:i};if(typeof e=="function"&&(l=e.defaultProps))for(h in l)u[h]===void 0&&(u[h]=l[h]);return C.vnode&&C.vnode(c),c}var ce,D,$e,ot,fe=0,Tt=[],M=C,it=M.__b,at=M.__r,st=M.diffed,lt=M.__c,ct=M.unmount,ht=M.__;function ke(e,t){M.__h&&M.__h(D,e,fe||t),fe=0;var n=D.__H||(D.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function S(e){return fe=1,Jt(Lt,e)}function Jt(e,t,n){var r=ke(ce++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Lt(void 0,t),function(h){var u=r.__N?r.__N[0]:r.__[0],c=r.t(u,h);u!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=D,!D.__f)){var a=function(h,u,c){if(!r.__c.__H)return!0;var _=r.__c.__H.__.filter(function(m){return!!m.__c});if(_.every(function(m){return!m.__N}))return!i||i.call(this,h,u,c);var s=r.__c.props!==h;return _.forEach(function(m){if(m.__N){var g=m.__[0];m.__=m.__N,m.__N=void 0,g!==m.__[0]&&(s=!0)}}),i&&i.call(this,h,u,c)||s};D.__f=!0;var i=D.shouldComponentUpdate,l=D.componentWillUpdate;D.componentWillUpdate=function(h,u,c){if(this.__e){var _=i;i=void 0,a(h,u,c),i=_}l&&l.call(this,h,u,c)},D.shouldComponentUpdate=a}return r.__N||r.__}function pe(e,t){var n=ke(ce++,3);!M.__s&&Ge(n.__H,t)&&(n.__=e,n.u=t,D.__H.__h.push(n))}function Qt(e,t){var n=ke(ce++,4);!M.__s&&Ge(n.__H,t)&&(n.__=e,n.u=t,D.__h.push(n))}function me(e){return fe=5,Mt(function(){return{current:e}},[])}function Dt(e,t,n){fe=6,Qt(function(){if(typeof e=="function"){var r=e(t());return function(){e(null),r&&typeof r=="function"&&r()}}if(e)return e.current=t(),function(){return e.current=null}},n==null?n:n.concat(e))}function Mt(e,t){var n=ke(ce++,7);return Ge(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function He(e,t){return fe=8,Mt(function(){return e},t)}function en(e){var t=D.context[e.__c],n=ke(ce++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(D)),t.props.value):e.__}function tn(){for(var e;e=Tt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Ie),e.__H.__h.forEach(Be),e.__H.__h=[]}catch(t){e.__H.__h=[],M.__e(t,e.__v)}}M.__b=function(e){D=null,it&&it(e)},M.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ht&&ht(e,t)},M.__r=function(e){at&&at(e),ce=0;var t=(D=e.__c).__H;t&&($e===D?(t.__h=[],D.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Ie),t.__h.forEach(Be),t.__h=[],ce=0)),$e=D},M.diffed=function(e){st&&st(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Tt.push(t)!==1&&ot===M.requestAnimationFrame||((ot=M.requestAnimationFrame)||nn)(tn)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),$e=D=null},M.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Ie),n.__h=n.__h.filter(function(r){return!r.__||Be(r)})}catch(r){t.some(function(a){a.__h&&(a.__h=[])}),t=[],M.__e(r,n.__v)}}),lt&&lt(e,t)},M.unmount=function(e){ct&&ct(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Ie(r)}catch(a){t=a}}),n.__H=void 0,t&&M.__e(t,n.__v))};var ut=typeof requestAnimationFrame=="function";function nn(e){var t,n=function(){clearTimeout(r),ut&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);ut&&(t=requestAnimationFrame(n))}function Ie(e){var t=D,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),D=t}function Be(e){var t=D;e.__c=e.__(),D=t}function Ge(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Lt(e,t){return typeof t=="function"?t(e):t}class we extends Error{constructor(t,n="UNKNOWN_ERROR",r=null){super(t),this.name="AppError",this.code=n,this.details=r,this.timestamp=new Date().toISOString()}}const At={FILE_TOO_LARGE:"FILE_TOO_LARGE",UNSUPPORTED_FORMAT:"UNSUPPORTED_FORMAT"},Ze=e=>(t,n="")=>{console.error(`[${n}] Error:`,t);let r="An unexpected error occurred.";t instanceof we?r=t.message:t.name==="QuotaExceededError"?r="Not enough memory available. Try using a smaller image.":t.message.includes("canvas")?r="Canvas operation failed. Please try again.":(t.message.includes("network")||t.message.includes("fetch"))&&(r="Network error. Please check your connection and try again."),e(r)},rn=(e,t)=>async(...n)=>{try{return await e(...n)}catch(r){throw t(r,e.name),r}},on=(e,t=10*1024*1024)=>{if(e.size>t)throw new we(`File size too large. Maximum size is ${Math.round(t/(1024*1024))}MB.`,At.FILE_TOO_LARGE,{fileSize:e.size,maxSize:t})},an=e=>{const t=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];if(!t.includes(e.type))throw new we("Unsupported file format. Please use JPEG, PNG, GIF, or WebP.",At.UNSUPPORTED_FORMAT,{fileType:e.type,supportedTypes:t})},sn=(e,t)=>{let n,r=0;return(...a)=>{const i=Date.now();i-r>t?(e(...a),r=i):(clearTimeout(n),n=setTimeout(()=>{e(...a),r=Date.now()},t-(i-r)))}},ln=(e,t)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>e(...r),t)}},cn=(e,t=4096,n=4096)=>{if(e.width>t||e.height>n)throw new Error(`Image dimensions too large. Maximum size is ${t}x${n}px`);return!0};function hn({onImageLoad:e,onError:t}){const[n,r]=S(!1),[a,i]=S(!1),l=me(),h=Ze(t),u=rn(async v=>{try{on(v),an(v)}catch(p){h(p,"File Validation");return}i(!0);try{const p=await c(v),L=await _(p);cn(L),i(!1),e==null||e(L,v)}catch(p){i(!1),h(p,"Image Loading")}},h),c=v=>new Promise((p,L)=>{const T=new FileReader;T.onload=B=>p(B.target.result),T.onerror=()=>L(new we("Failed to read file. Please try again.")),T.readAsDataURL(v)}),_=v=>new Promise((p,L)=>{const T=new Image;T.onload=()=>p(T),T.onerror=()=>L(new we("Invalid image file. Please try another file.")),T.src=v});return o("div",{className:"image-upload",children:o("div",{className:`upload-area ${n?"drag-over":""} ${a?"loading":""}`,onDragEnter:v=>{v.preventDefault(),r(!0)},onDragOver:v=>{v.preventDefault()},onDragLeave:v=>{v.preventDefault(),v.currentTarget.contains(v.relatedTarget)||r(!1)},onDrop:v=>{v.preventDefault(),r(!1);const p=Array.from(v.dataTransfer.files);p.length>0&&u(p[0])},onClick:()=>{var v;(v=l.current)==null||v.click()},children:[o("input",{ref:l,type:"file",accept:"image/*",onChange:v=>{const p=Array.from(v.target.files);p.length>0&&u(p[0])},style:{display:"none"}}),a?o("div",{className:"loading-indicator",children:[o("div",{className:"spinner"}),o("p",{children:"Loading image..."})]}):o("div",{className:"upload-content",children:[o("div",{className:"upload-icon",children:"📷"}),o("h3",{children:"Upload an Image"}),o("p",{children:"Drag and drop an image here, or click to select"}),o("p",{className:"supported-formats",children:"Supports: JPEG, PNG, GIF, WebP (max 10MB)"})]})]})})}function un({tool:e,onToolChange:t,brushSize:n,onBrushSizeChange:r,color:a,onColorChange:i,onUndo:l,onRedo:h,onClear:u,canUndo:c,canRedo:_,tools:s}){const m={brush:"🖌️",pencil:"✏️",eraser:"🧽",fill:"🪣",rectangle:"⬜",ellipse:"⭕",line:"📏",text:"📝"},g={brush:"Brush",pencil:"Pencil",eraser:"Eraser",fill:"Fill",rectangle:"Rectangle",ellipse:"Ellipse",line:"Line",text:"Text"},N=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#FFC0CB","#A52A2A","#808080","#000080","#008000"];return o("div",{className:"toolbar-sidebar",children:[o("div",{className:"tool-grid",children:Object.entries(s).map(([b,P])=>o("button",{className:`tool-btn ${e===P?"active":""}`,onClick:()=>t(P),title:g[P],children:m[P]},b))}),o("div",{className:"control-section",children:[o("label",{className:"control-label",children:["Size: ",n,"px"]}),o("input",{type:"range",min:"1",max:"50",value:n,onChange:b=>r(parseInt(b.target.value)),className:"size-slider"})]}),o("div",{className:"control-section",children:[o("label",{className:"control-label",children:"Color"}),o("div",{className:"color-section",children:[o("input",{type:"color",value:a,onChange:b=>i(b.target.value),className:"color-picker",title:"Custom color"}),o("div",{className:"color-presets",children:N.map(b=>o("button",{className:`color-preset ${a===b?"active":""}`,style:{backgroundColor:b},onClick:()=>i(b),title:b},b))})]})]}),o("div",{className:"control-section",children:o("div",{className:"action-buttons",children:[o("button",{className:"action-btn",onClick:l,disabled:!c,title:"Undo",children:"↶ Undo"}),o("button",{className:"action-btn",onClick:h,disabled:!_,title:"Redo",children:"↷ Redo"}),o("button",{className:"action-btn clear-btn",onClick:u,title:"Clear canvas",children:"🗑️ Clear"})]})})]})}function Ot(e,t){for(var n in t)e[n]=t[n];return e}function _t(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function dt(e,t){this.props=e,this.context=t}(dt.prototype=new te).isPureReactComponent=!0,dt.prototype.shouldComponentUpdate=function(e,t){return _t(this.props,e)||_t(this.state,t)};var ft=C.__b;C.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),ft&&ft(e)};var _n=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ht(e){function t(n){var r=Ot({},n);return delete r.ref,e(r,n.ref||null)}return t.$$typeof=_n,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var dn=C.__e;C.__e=function(e,t,n,r){if(e.then){for(var a,i=t;i=i.__;)if((a=i.__c)&&a.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),a.__c(e,t)}dn(e,t,n,r)};var pt=C.unmount;function Bt(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=Ot({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return Bt(r,t,n)})),e}function Wt(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return Wt(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function Te(){this.__u=0,this.o=null,this.__b=null}function Ut(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Se(){this.i=null,this.l=null}C.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),pt&&pt(e)},(Te.prototype=new te).__c=function(e,t){var n=t.__c,r=this;r.o==null&&(r.o=[]),r.o.push(n);var a=Ut(r.__v),i=!1,l=function(){i||(i=!0,n.__R=null,a?a(h):h())};n.__R=l;var h=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=Wt(u,u.__c.__P,u.__c.__O)}var c;for(r.setState({__a:r.__b=null});c=r.o.pop();)c.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(l,l)},Te.prototype.componentWillUnmount=function(){this.o=[]},Te.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Bt(this.__b,n,r.__O=r.__P)}this.__b=null}var a=t.__a&&Le(le,null,e.fallback);return a&&(a.__u&=-33),[Le(le,null,t.__a?null:e.children),a]};var mt=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(Se.prototype=new te).__a=function(e){var t=this,n=Ut(t.__v),r=t.l.get(e);return r[0]++,function(a){var i=function(){t.props.revealOrder?(r.push(a),mt(t,e,r)):a()};n?n(i):i()}},Se.prototype.render=function(e){this.i=null,this.l=new Map;var t=Ee(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},Se.prototype.componentDidUpdate=Se.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){mt(e,n,t)})};var fn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,pn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,mn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,gn=/[A-Z0-9]/g,vn=typeof document<"u",yn=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};te.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(te.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var gt=C.event;function bn(){}function wn(){return this.cancelBubble}function Nn(){return this.defaultPrevented}C.event=function(e){return gt&&(e=gt(e)),e.persist=bn,e.isPropagationStopped=wn,e.isDefaultPrevented=Nn,e.nativeEvent=e};var kn={enumerable:!1,configurable:!0,get:function(){return this.class}},vt=C.vnode;C.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,r=t.type,a={},i=r.indexOf("-")===-1;for(var l in n){var h=n[l];if(!(l==="value"&&"defaultValue"in n&&h==null||vn&&l==="children"&&r==="noscript"||l==="class"||l==="className")){var u=l.toLowerCase();l==="defaultValue"&&"value"in n&&n.value==null?l="value":l==="download"&&h===!0?h="":u==="translate"&&h==="no"?h=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?l="ondblclick":u!=="onchange"||r!=="input"&&r!=="textarea"||yn(n.type)?u==="onfocus"?l="onfocusin":u==="onblur"?l="onfocusout":mn.test(l)&&(l=u):u=l="oninput":i&&pn.test(l)?l=l.replace(gn,"-$&").toLowerCase():h===null&&(h=void 0),u==="oninput"&&a[l=u]&&(l="oninputCapture"),a[l]=h}}r=="select"&&a.multiple&&Array.isArray(a.value)&&(a.value=Ee(n.children).forEach(function(c){c.props.selected=a.value.indexOf(c.props.value)!=-1})),r=="select"&&a.defaultValue!=null&&(a.value=Ee(n.children).forEach(function(c){c.props.selected=a.multiple?a.defaultValue.indexOf(c.props.value)!=-1:a.defaultValue==c.props.value})),n.class&&!n.className?(a.class=n.class,Object.defineProperty(a,"className",kn)):(n.className&&!n.class||n.class&&n.className)&&(a.class=a.className=n.className),t.props=a}(e),e.$$typeof=fn,vt&&vt(e)};var yt=C.__r;C.__r=function(e){yt&&yt(e),e.__c};var bt=C.diffed;C.diffed=function(e){bt&&bt(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};const Cn=Ht(function({image:t,onCanvasUpdate:n,onError:r,canvasSize:a={width:800,height:600},tool:i="brush",brushSize:l=5,color:h="#000000",zoom:u=1,onUndoRedoUpdate:c},_){Dt(_,()=>({undo:O,redo:G,clearCanvas:ve}));const s=me(),[m,g]=S(!1),[N,b]=S([]),[P,v]=S([]),[p,L]=S(null),[T,B]=S(null),[Y,j]=S(!1),[q,W]=S(""),[z,A]=S(null),Z=Ze(r);pe(()=>{if(s.current){const y=s.current,w=y.getContext("2d");t?(y.width=t.width,y.height=t.height,w.clearRect(0,0,y.width,y.height),w.drawImage(t,0,0)):(y.width=a.width,y.height=a.height,w.clearRect(0,0,y.width,y.height),w.fillStyle="#ffffff",w.fillRect(0,0,y.width,y.height)),K()}},[t,a]);const K=()=>{const y=s.current;if(y){const w=y.toDataURL(),I=[...N,w].slice(-20);b(I),v([]),n==null||n(y),c==null||c(I,[])}},O=()=>{if(N.length>1){const y=s.current,w=y.getContext("2d"),I=N[N.length-1],x=N[N.length-2],$=[...P,I],d=N.slice(0,-1);v($),b(d),c==null||c(d,$);const f=new window.Image;f.onload=()=>{w.clearRect(0,0,y.width,y.height),w.drawImage(f,0,0),n==null||n(y)},f.src=x}},G=()=>{if(P.length>0){const y=s.current,w=y.getContext("2d"),I=P[P.length-1],x=[...N,I],$=P.slice(0,-1);b(x),v($),c==null||c(x,$);const d=new window.Image;d.onload=()=>{w.clearRect(0,0,y.width,y.height),w.drawImage(d,0,0),n==null||n(y)},d.src=I}},ne=y=>{const I=s.current.getBoundingClientRect();return{x:(y.clientX-I.left)/u,y:(y.clientY-I.top)/u}},ie=(y,w,I,x,$)=>{const d=y.getImageData(0,0,y.canvas.width,y.canvas.height),f=d.data,R=[[Math.floor(w),Math.floor(I)]],E=new Set,F=H=>{const V=f[H],_e=f[H+1],J=f[H+2],Ce=f[H+3];return V===$.r&&_e===$.g&&J===$.b&&Ce===$.a},X=parseInt(x.substr(1,2),16),ye=parseInt(x.substr(3,2),16),Q=parseInt(x.substr(5,2),16);for(;R.length>0;){const[H,V]=R.pop(),_e=`${H},${V}`;if(E.has(_e)||H<0||H>=y.canvas.width||V<0||V>=y.canvas.height)continue;E.add(_e);const J=(V*y.canvas.width+H)*4;F(J)&&(f[J]=X,f[J+1]=ye,f[J+2]=Q,f[J+3]=255,R.push([H+1,V],[H-1,V],[H,V+1],[H,V-1]))}y.putImageData(d,0,0)},re=y=>{if(Y)return;const w=ne(y);g(!0),L(w);const I=s.current,x=I.getContext("2d");if(i==="fill"){const $=x.getImageData(w.x,w.y,1,1),d={r:$.data[0],g:$.data[1],b:$.data[2],a:$.data[3]};ie(x,w.x,w.y,h,d),K(),g(!1);return}if(i==="text"){A(w),j(!0),g(!1);return}if(["rectangle","ellipse","line"].includes(i)){const $=document.createElement("canvas");$.width=I.width,$.height=I.height,$.getContext("2d").drawImage(I,0,0),B($);return}x.globalCompositeOperation=i==="eraser"?"destination-out":"source-over",x.strokeStyle=i==="eraser"?"rgba(0,0,0,1)":h,x.lineWidth=l,x.lineCap="round",x.lineJoin="round",i==="pencil"?x.globalAlpha=1:x.globalAlpha=i==="eraser"?1:.8,x.beginPath(),x.moveTo(w.x,w.y)},ae=He(y=>{if(m)try{const w=ne(y),I=s.current,x=I.getContext("2d");if(["rectangle","ellipse","line"].includes(i)){if(x.clearRect(0,0,I.width,I.height),x.drawImage(T,0,0),x.strokeStyle=h,x.lineWidth=l,x.globalCompositeOperation="source-over",i==="rectangle"){const $=w.x-p.x,d=w.y-p.y;x.strokeRect(p.x,p.y,$,d)}else if(i==="ellipse"){const $=Math.abs(w.x-p.x),d=Math.abs(w.y-p.y),f=(p.x+w.x)/2,R=(p.y+w.y)/2;x.beginPath(),x.ellipse(f,R,$,d,0,0,2*Math.PI),x.stroke()}else i==="line"&&(x.beginPath(),x.moveTo(p.x,p.y),x.lineTo(w.x,w.y),x.stroke());return}["brush","pencil","eraser"].includes(i)&&(x.lineTo(w.x,w.y),x.stroke())}catch(w){Z(w,"Drawing")}},[m,i,h,l,p,T]),ge=He(sn(ae,16),[ae]),he=()=>{m&&(g(!1),B(null),K())},ve=()=>{const y=s.current,w=y.getContext("2d");t?(w.clearRect(0,0,y.width,y.height),w.drawImage(t,0,0)):w.clearRect(0,0,y.width,y.height),K()},ue=y=>{if(!y.trim()||!z)return;const I=s.current.getContext("2d");I.globalCompositeOperation="source-over",I.fillStyle=h,I.font=`${l*4}px Arial, sans-serif`,I.textBaseline="top",I.fillText(y,z.x,z.y),j(!1),W(""),A(null),K()},oe=()=>{j(!1),W(""),A(null)};return o("div",{className:"paint-canvas",children:o("div",{className:"canvas-container",children:o("div",{className:"canvas-wrapper",children:[o("canvas",{ref:s,onMouseDown:re,onMouseMove:ge,onMouseUp:he,onMouseLeave:he,className:"paint-canvas-element",style:{transform:`scale(${u})`,transformOrigin:"top left"}}),Y&&o("div",{className:"text-input-overlay",style:{position:"absolute",left:`${z.x*u}px`,top:`${z.y*u}px`,transform:`scale(${u})`,transformOrigin:"top left"},children:o("input",{type:"text",value:q,onChange:y=>W(y.target.value),onKeyDown:y=>{y.key==="Enter"?ue(q):y.key==="Escape"&&oe()},onBlur:()=>{setTimeout(()=>{q.trim()?ue(q):oe()},10)},autoFocus:!0,placeholder:"Type your text...",style:{fontSize:`${l*4}px`,color:h,background:"transparent",border:"2px dashed #999",outline:"none",padding:"2px",fontFamily:"Arial, sans-serif",minWidth:"100px"}})})]})})})}),xn=Ht(({image:e,onCanvasUpdate:t,onError:n,canvasSize:r={width:800,height:600},zoom:a=1,controls:i,setControls:l,onResetFilters:h,onRotateImage:u,onFlipImage:c,onScale:_,onApplyCrop:s,onCancelCrop:m,onUndo:g,onRedo:N,crop:b,setCrop:P,isDragging:v,setIsDragging:p,dragStart:L,setDragStart:T,rotation:B,setRotation:Y,scale:j,setScale:q,undoStack:W,setUndoStack:z,redoStack:A,setRedoStack:Z},K)=>{Dt(K,()=>({flipImage:ue,applyCrop:I,undo:x,redo:$}));const O=me(),G=me(),ne=Ze(n);pe(()=>{if(O.current){const d=O.current,f=d.getContext("2d");e?(d.width=e.width,d.height=e.height,G.current=e,f.clearRect(0,0,d.width,d.height),f.drawImage(e,0,0)):(d.width=r.width,d.height=r.height,f.clearRect(0,0,d.width,d.height),f.fillStyle="#ffffff",f.fillRect(0,0,d.width,d.height),G.current=null),re()}},[e,r]);const ie=He(ln(()=>{try{ae()}catch(d){ne(d,"Filter Application")}},100),[i,B,j]);pe(()=>{ie()},[i,B,j,ie]);const re=()=>{const d=O.current;if(d){const f=d.toDataURL();z(R=>[...R,f].slice(-20)),Z([]),t==null||t(d)}},ae=()=>{if(!O.current)return;const d=O.current,f=d.getContext("2d");if(f.clearRect(0,0,d.width,d.height),!G.current){f.fillStyle="#ffffff",f.fillRect(0,0,d.width,d.height);return}if(f.save(),B!==0||j!==1){const E=d.width/2,F=d.height/2;f.translate(E,F),f.rotate(B*Math.PI/180),f.scale(j,j),f.translate(-E,-F)}const R=[`brightness(${i.brightness}%)`,`contrast(${i.contrast}%)`,`saturate(${i.saturation}%)`,`blur(${i.blur}px)`,`hue-rotate(${i.hue}deg)`].join(" ");f.filter=R,f.drawImage(G.current,0,0),f.restore(),f.filter="none"},ge=d=>oe(d),he=d=>y(d),ve=()=>w(),ue=d=>{const f=O.current;if(f.getContext("2d"),!G.current)return;const R=document.createElement("canvas");R.width=f.width,R.height=f.height;const E=R.getContext("2d");E.save(),d==="horizontal"?(E.translate(R.width,0),E.scale(-1,1)):(E.translate(0,R.height),E.scale(1,-1)),E.drawImage(G.current,0,0),E.restore();const F=new window.Image;F.onload=()=>{G.current=F,ae(),re()},F.src=R.toDataURL()},oe=d=>{const R=O.current.getBoundingClientRect(),E=(d.clientX-R.left)/a,F=(d.clientY-R.top)/a;p(!0),T({x:E,y:F}),P({x:E,y:F,width:0,height:0,active:!0})},y=d=>{if(!v)return;const R=O.current.getBoundingClientRect(),E=(d.clientX-R.left)/a,F=(d.clientY-R.top)/a;P(X=>({...X,width:E-L.x,height:F-L.y}))},w=()=>{if(p(!1),Math.abs(b.width)<10||Math.abs(b.height)<10){P(d=>({...d,active:!1}));return}},I=()=>{if(!b.active)return;const d=O.current,f=d.getContext("2d"),R=Math.min(b.x,b.x+b.width),E=Math.min(b.y,b.y+b.height),F=Math.abs(b.width),X=Math.abs(b.height),ye=f.getImageData(R,E,F,X);d.width=F,d.height=X,f.putImageData(ye,0,0);const Q=new Image;Q.onload=()=>{G.current=Q,P(H=>({...H,active:!1})),re()},Q.src=d.toDataURL()},x=()=>{if(W.length>1){const d=O.current,f=d.getContext("2d"),R=W[W.length-1],E=W[W.length-2];Z(X=>[...X,R]),z(X=>X.slice(0,-1));const F=new Image;F.onload=()=>{d.width=F.width,d.height=F.height,f.clearRect(0,0,d.width,d.height),f.drawImage(F,0,0),G.current=F,t==null||t(d)},F.src=E}},$=()=>{if(A.length>0){const d=O.current,f=d.getContext("2d"),R=A[A.length-1];z(F=>[...F,R]),Z(F=>F.slice(0,-1));const E=new Image;E.onload=()=>{d.width=E.width,d.height=E.height,f.clearRect(0,0,d.width,d.height),f.drawImage(E,0,0),G.current=E,t==null||t(d)},E.src=R}};return o("div",{className:"photo-editor",children:[!e&&o("div",{className:"no-image-message",children:o("p",{children:"📷 Load an image to use photo editing features"})}),e&&o("div",{className:"canvas-container",children:o("div",{className:"canvas-wrapper",style:{transform:`scale(${a})`,transformOrigin:"top left"},children:[o("canvas",{ref:O,onMouseDown:ge,onMouseMove:he,onMouseUp:ve,className:"photo-canvas"}),b.active&&o("div",{className:"crop-overlay",style:{left:`${Math.min(b.x,b.x+b.width)}px`,top:`${Math.min(b.y,b.y+b.height)}px`,width:`${Math.abs(b.width)}px`,height:`${Math.abs(b.height)}px`}})]})})]})}),Sn=({controls:e,setControls:t,onResetFilters:n,onRotateImage:r,onFlipImage:a,onScale:i,onApplyCrop:l,onCancelCrop:h,onUndo:u,onRedo:c,crop:_})=>o("div",{className:"photo-controls-panel sidebar-photo-controls",children:[o("div",{className:"filter-controls",children:[o("label",{children:["Brightness",o("input",{type:"range",min:"0",max:"200",value:e.brightness,onInput:s=>t(m=>({...m,brightness:parseInt(s.target.value)}))})]}),o("label",{children:["Contrast",o("input",{type:"range",min:"0",max:"200",value:e.contrast,onInput:s=>t(m=>({...m,contrast:parseInt(s.target.value)}))})]}),o("label",{children:["Saturation",o("input",{type:"range",min:"0",max:"200",value:e.saturation,onInput:s=>t(m=>({...m,saturation:parseInt(s.target.value)}))})]}),o("label",{children:["Blur",o("input",{type:"range",min:"0",max:"20",value:e.blur,onInput:s=>t(m=>({...m,blur:parseInt(s.target.value)}))})]}),o("label",{children:["Hue",o("input",{type:"range",min:"-180",max:"180",value:e.hue,onInput:s=>t(m=>({...m,hue:parseInt(s.target.value)}))})]}),o("button",{onClick:()=>t({brightness:100,contrast:100,saturation:100,blur:0,hue:0}),children:"Reset Filters"})]}),o("div",{className:"transform-controls",children:[o("button",{onClick:()=>r(90),children:"Rotate +90°"}),o("button",{onClick:()=>r(-90),children:"Rotate -90°"}),o("button",{onClick:()=>a("horizontal"),children:"Flip Horizontal"}),o("button",{onClick:()=>a("vertical"),children:"Flip Vertical"}),o("button",{onClick:()=>i("out"),children:"Scale -"}),o("button",{onClick:()=>i("in"),children:"Scale +"})]}),o("div",{className:"crop-controls",children:[o("button",{onClick:l,disabled:!_.active,children:"Apply Crop"}),o("button",{onClick:h,disabled:!_.active,children:"Cancel Crop"})]}),o("div",{className:"history-controls",children:[o("button",{onClick:u,children:"Undo"}),o("button",{onClick:c,children:"Redo"})]})]});function Pn({canvas:e,filename:t="paintshop-image"}){const[n,r]=S(!1),[a,i]=S(!1),l=async(u="png",c=1)=>{if(e){r(!0);try{const _=document.createElement("canvas"),s=_.getContext("2d");_.width=e.width,_.height=e.height,u==="jpeg"&&(s.fillStyle="#FFFFFF",s.fillRect(0,0,_.width,_.height)),s.drawImage(e,0,0),_.toBlob(m=>{if(m){const g=URL.createObjectURL(m),N=document.createElement("a");N.href=g,N.download=`${t}.${u}`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(g)}r(!1),i(!1)},`image/${u}`,c)}catch(_){console.error("Export failed:",_),r(!1)}}},h=()=>{e&&i(!a)};return e?o("div",{className:"export-container",children:[o("button",{className:"icon-btn",onClick:h,disabled:n,children:[n?o("span",{className:"spinner-small"}):o(le,{children:"💾"}),o("div",{className:"tooltip",children:"Export Image"})]}),a&&o("div",{className:"export-formats",children:[o("div",{className:"formats-header",children:[o("h3",{children:"Choose Format"}),o("button",{className:"close-btn",onClick:()=>i(!1),children:"✕"})]}),o("div",{className:"format-options",children:[o("button",{className:"format-btn",onClick:()=>l("png"),title:"Best for images with transparency",children:[o("span",{className:"format-icon",children:"🖼️"}),o("div",{className:"format-info",children:[o("strong",{children:"PNG"}),o("small",{children:"Lossless, supports transparency"})]})]}),o("button",{className:"format-btn",onClick:()=>l("jpeg",.9),title:"Smaller file size, good for photos",children:[o("span",{className:"format-icon",children:"📷"}),o("div",{className:"format-info",children:[o("strong",{children:"JPEG"}),o("small",{children:"Smaller size, good for photos"})]})]}),o("button",{className:"format-btn",onClick:()=>l("webp",.9),title:"Modern format, best compression",children:[o("span",{className:"format-icon",children:"🚀"}),o("div",{className:"format-info",children:[o("strong",{children:"WebP"}),o("small",{children:"Modern format, best compression"})]})]})]})]})]}):o("button",{className:"icon-btn",disabled:!0,children:["💾",o("div",{className:"tooltip",children:"No image to export"})]})}function In({onCreateCanvas:e,onCancel:t,currentSize:n}){const[r,a]=S(n.width),[i,l]=S(n.height),h=[{name:"Small (400×300)",width:400,height:300},{name:"Medium (800×600)",width:800,height:600},{name:"Large (1200×800)",width:1200,height:800},{name:"HD (1920×1080)",width:1920,height:1080},{name:"Square Small (400×400)",width:400,height:400},{name:"Square Large (800×800)",width:800,height:800},{name:"Portrait (600×800)",width:600,height:800},{name:"Landscape (1000×600)",width:1e3,height:600}],u=_=>{a(_.width),l(_.height)},c=()=>{r>0&&i>0&&r<=4e3&&i<=4e3&&e({width:parseInt(r),height:parseInt(i)})};return o("div",{className:"canvas-settings",children:[o("div",{className:"settings-header",children:[o("h2",{children:"New Canvas"}),o("button",{className:"close-btn",onClick:t,children:"✕"})]}),o("div",{className:"settings-content",children:[o("div",{className:"presets-section",children:[o("h3",{children:"Presets"}),o("div",{className:"presets-grid",children:h.map((_,s)=>o("button",{className:`preset-btn ${r===_.width&&i===_.height?"active":""}`,onClick:()=>u(_),children:_.name},s))})]}),o("div",{className:"custom-section",children:[o("h3",{children:"Custom Size"}),o("div",{className:"size-inputs",children:[o("div",{className:"input-group",children:[o("label",{children:"Width (px)"}),o("input",{type:"number",min:"1",max:"4000",value:r,onChange:_=>a(_.target.value)})]}),o("div",{className:"input-group",children:[o("label",{children:"Height (px)"}),o("input",{type:"number",min:"1",max:"4000",value:i,onChange:_=>l(_.target.value)})]})]}),o("p",{className:"size-info",children:["Canvas size: ",r," × ",i," pixels",(r>2e3||i>2e3)&&o("span",{className:"warning",children:" (Large canvas may affect performance)"})]})]}),o("div",{className:"settings-actions",children:[o("button",{className:"cancel-btn",onClick:t,children:"Cancel"}),o("button",{className:"create-btn",onClick:c,disabled:!r||!i||r<=0||i<=0||r>4e3||i>4e3,children:"Create Canvas"})]})]})]})}function Rn({onClose:e}){return o("div",{className:"help-modal",children:o("div",{className:"help-content",children:[o("div",{className:"help-header",children:[o("h2",{children:"PaintShop Help"}),o("button",{className:"close-btn",onClick:e,children:"✕"})]}),o("div",{className:"help-body",children:[o("section",{className:"help-section",children:[o("h3",{children:"Getting Started"}),o("ul",{children:[o("li",{children:"Start drawing immediately on the blank canvas"}),o("li",{children:"Load an image to edit or draw over it"}),o("li",{children:"Switch between Paint and Photo Edit modes"}),o("li",{children:"Export your work when finished"})]})]}),o("section",{className:"help-section",children:[o("h3",{children:"Paint Mode"}),o("ul",{children:[o("li",{children:"Use various tools: brush, pencil, eraser, shapes"}),o("li",{children:"Adjust brush size and color"}),o("li",{children:"Fill areas with the bucket tool"}),o("li",{children:"Undo/redo your actions"})]})]}),o("section",{className:"help-section",children:[o("h3",{children:"Photo Edit Mode"}),o("ul",{children:[o("li",{children:"Adjust brightness, contrast, saturation"}),o("li",{children:"Apply blur and hue rotation effects"}),o("li",{children:"Rotate and scale images"}),o("li",{children:"Crop images by dragging on canvas"})]})]}),o("section",{className:"help-section",children:[o("h3",{children:"Keyboard Shortcuts"}),o("div",{className:"shortcuts-grid",children:[{key:"Ctrl/Cmd + N",action:"New Canvas"},{key:"Ctrl/Cmd + O",action:"Load Image"},{key:"Ctrl/Cmd + S",action:"Export Canvas"},{key:"Ctrl/Cmd + Z",action:"Undo (in canvas)"},{key:"Ctrl/Cmd + Y",action:"Redo (in canvas)"},{key:"Escape",action:"Close modals"},{key:"1-8",action:"Select paint tools"},{key:"[/]",action:"Decrease/Increase brush size"}].map((n,r)=>o("div",{className:"shortcut-item",children:[o("kbd",{children:n.key}),o("span",{children:n.action})]},r))})]})]}),o("div",{className:"help-footer",children:o("button",{className:"close-btn-primary",onClick:e,children:"Got it!"})})]})})}function En({tool:e,onToolChange:t,brushSize:n,onBrushSizeChange:r,color:a,onColorChange:i,onUndo:l,onRedo:h,onClear:u,canUndo:c,canRedo:_,tools:s}){return o(un,{tool:e,onToolChange:t,brushSize:n,onBrushSizeChange:r,color:a,onColorChange:i,onUndo:l,onRedo:h,onClear:u,canUndo:c,canRedo:_,tools:s})}const jt=Yt(),Fn=()=>{const e=en(jt);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},$n=({children:e})=>{const[t,n]=S(()=>{const u=localStorage.getItem("paintshop-theme");return u&&["light","dark","system"].includes(u)?u:"system"}),[r,a]=S("light"),i=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";pe(()=>{const u=()=>{const s=t==="system"?i():t;a(s),document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(s),document.documentElement.setAttribute("data-theme",s)};u();const c=window.matchMedia("(prefers-color-scheme: dark)"),_=()=>{t==="system"&&u()};return c.addEventListener("change",_),()=>c.removeEventListener("change",_)},[t]),pe(()=>{localStorage.setItem("paintshop-theme",t)},[t]);const l=u=>{["light","dark","system"].includes(u)&&n(u)},h={theme:t,resolvedTheme:r,setTheme:l,toggleTheme:()=>{l(r==="light"?"dark":"light")}};return o(jt.Provider,{value:h,children:e})};function Tn(){const{theme:e,resolvedTheme:t,setTheme:n}=Fn();return o("div",{className:"theme-toggle",children:[o("select",{value:e,onChange:a=>{n(a.target.value)},className:"theme-select",title:"Theme selection",children:[o("option",{value:"system",children:"🌓 System"}),o("option",{value:"light",children:"☀️ Light"}),o("option",{value:"dark",children:"🌙 Dark"})]}),o("div",{className:"tooltip",children:["Theme: ",e==="system"?`System (${t})`:e]})]})}function Dn(){const e=me(),[t,n]=S(null),[r,a]=S("paint"),[i,l]=S(null),[h,u]=S(null),[c,_]=S(!1),[s,m]=S(!1),[g,N]=S(!1),[b,P]=S({width:800,height:600}),[v,p]=S(!1),[L,T]=S("brush"),[B,Y]=S(5),[j,q]=S("#000000"),[W,z]=S([]),[A,Z]=S([]),[K,O]=S(1),[G,ne]=S({brightness:100,contrast:100,saturation:100,blur:0,hue:0}),[ie,re]=S({x:0,y:0,width:0,height:0,active:!1}),[ae,ge]=S(!1),[he,ve]=S({x:0,y:0}),[ue,oe]=S(0),[y,w]=S(1),[I,x]=S([]),[$,d]=S([]),f=me(),R={brush:"brush",pencil:"pencil",eraser:"eraser",fill:"fill",rectangle:"rectangle",ellipse:"ellipse",line:"line",text:"text"},E=()=>{O(k=>Math.min(k*1.2,5))},F=()=>{O(k=>Math.max(k/1.2,.1))},X=()=>{O(1)},ye=(k,U)=>{p(!0),setTimeout(()=>{n(k),u(null),_(!1),P({width:k.width,height:k.height}),p(!1),console.log("Image loaded:",U.name,`${k.width}x${k.height}`)},100)},Q=k=>{u(k),setTimeout(()=>u(null),5e3)},H=k=>{l(k)},V=k=>{a(k)},_e=(k=null)=>{p(!0),setTimeout(()=>{n(null),l(null),a("paint"),_(!1),m(!1),k&&P(k),p(!1)},100)},J=()=>{_(!0)},Ce=()=>{m(!0)},Ve=()=>{ne({brightness:100,contrast:100,saturation:100,blur:0,hue:0}),oe(0),w(1)},qe=k=>{oe(U=>(U+k+360)%360)},Xe=k=>{f.current&&f.current.flipImage&&f.current.flipImage(k)},Ye=k=>{w(U=>k==="in"?Math.min(U*1.2,5):k==="out"?Math.max(U/1.2,.1):U)},Ke=()=>{f.current&&f.current.applyCrop&&f.current.applyCrop()},Je=()=>{re(k=>({...k,active:!1}))},Qe=()=>{f.current&&f.current.undo&&f.current.undo()},et=()=>{f.current&&f.current.redo&&f.current.redo()};return pe(()=>{const k=U=>{if(U.ctrlKey||U.metaKey)switch(U.key){case"n":U.preventDefault(),Ce();break;case"o":U.preventDefault(),J();break;case"s":U.preventDefault();break}U.key==="Escape"&&(c?_(!1):s?m(!1):g&&N(!1))};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[c,s,g]),o("div",{className:"app",children:[o("header",{className:"app-header",children:o("div",{className:"header-content",children:[o("div",{className:"header-left",children:[o("div",{className:"app-logo",children:"🎨"}),o("div",{className:"header-title",children:[o("h1",{children:"PaintShop"}),o("p",{children:"Paint & Photo Editor"})]})]}),o("div",{className:"header-right",children:[o(Tn,{}),o("button",{className:"icon-btn",onClick:()=>N(!0),children:["❓",o("div",{className:"tooltip",children:"Help & Shortcuts"})]}),o(Pn,{canvas:i})]})]})}),h&&o("div",{className:"error-banner",children:[o("span",{children:["⚠️ ",h]}),o("button",{onClick:()=>u(null),className:"error-close",children:"✕"})]}),o("main",{className:"app-main",children:c?o("div",{className:"welcome-screen",children:[o("div",{className:"upload-header",children:o("button",{className:"back-btn",onClick:()=>_(!1),title:"Back to canvas",children:"← Back to Canvas"})}),o(hn,{onImageLoad:ye,onError:Q})]}):o("div",{className:"editor-screen",children:[o("div",{className:"editor-sidebar",children:[o("div",{className:"sidebar-section",children:[o("h3",{children:"Mode"}),o("div",{className:"mode-toggle-compact",children:[o("button",{className:`mode-btn-compact ${r==="paint"?"active":""}`,onClick:()=>V("paint"),children:"🎨 Paint"}),o("button",{className:`mode-btn-compact ${r==="photo"?"active":""}`,onClick:()=>V("photo"),children:"🖼️ Photo"})]})]}),o("div",{className:"sidebar-section",children:[o("h3",{children:"Actions"}),o("div",{className:"action-buttons",children:[o("button",{className:"action-btn load-image-btn",onClick:J,title:"Load image from file",children:"📁 Load Image"}),o("button",{className:"action-btn new-canvas-btn",onClick:Ce,title:"New blank canvas",children:"📄 New Canvas"})]})]}),o("div",{className:"sidebar-section",children:[o("h3",{children:"View"}),o("div",{className:"zoom-controls",children:[o("div",{className:"zoom-info",children:o("span",{children:["Zoom: ",Math.round(K*100),"%"]})}),o("div",{className:"zoom-buttons",children:[o("button",{className:"action-btn zoom-btn",onClick:F,title:"Zoom out",children:"🔍- Zoom Out"}),o("button",{className:"action-btn zoom-btn",onClick:X,title:"Reset zoom",children:"🎯 Reset"}),o("button",{className:"action-btn zoom-btn",onClick:E,title:"Zoom in",children:"🔍+ Zoom In"})]})]})]}),r==="paint"&&o("div",{className:"sidebar-section",children:[o("h3",{children:"Tools"}),o(En,{tool:L,onToolChange:T,brushSize:B,onBrushSizeChange:Y,color:j,onColorChange:q,onUndo:()=>{var k;return(k=e.current)==null?void 0:k.undo()},onRedo:()=>{var k;return(k=e.current)==null?void 0:k.redo()},onClear:()=>{var k;return(k=e.current)==null?void 0:k.clearCanvas()},canUndo:W.length>1,canRedo:A.length>0,tools:R})]}),r==="photo"&&o("div",{className:"sidebar-section",children:[o("h3",{children:"Adjustments"}),o(Sn,{controls:G,setControls:ne,onResetFilters:Ve,onRotateImage:qe,onFlipImage:Xe,onScale:Ye,onApplyCrop:Ke,onCancelCrop:Je,onUndo:Qe,onRedo:et,crop:ie})]})]}),o("div",{className:"editor-container",children:[r==="paint"?o(Cn,{ref:e,image:t,onCanvasUpdate:H,onError:Q,canvasSize:b,tool:L,brushSize:B,color:j,zoom:K,onUndoRedoUpdate:(k,U)=>{z(k),Z(U)}}):null,r==="photo"&&o(xn,{ref:f,image:t,onCanvasUpdate:H,onError:Q,canvasSize:b,zoom:K,controls:G,setControls:ne,onResetFilters:Ve,onRotateImage:qe,onFlipImage:Xe,onScale:Ye,onApplyCrop:Ke,onCancelCrop:Je,onUndo:Qe,onRedo:et,crop:ie,setCrop:re,isDragging:ae,setIsDragging:ge,dragStart:he,setDragStart:ve,rotation:ue,setRotation:oe,scale:y,setScale:w,undoStack:I,setUndoStack:x,redoStack:$,setRedoStack:d})]})]})}),s&&o(In,{currentSize:b,onCreateCanvas:_e,onCancel:()=>m(!1)}),g&&o(Rn,{onClose:()=>N(!1)}),v&&o("div",{className:"loading-overlay",children:o("div",{className:"loading-spinner",children:[o("div",{className:"spinner"}),o("p",{children:"Loading..."})]})})]})}Xt(o($n,{children:o(Dn,{})}),document.getElementById("app"));
